<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Products</title>
    <link rel="stylesheet" href="/assets/css/product.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        select {
            height: 35px;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        .col {
            flex: 1;
            padding: 0 10px;
            min-width: 200px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .container {
            margin: auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            
        }
        th {
            background-color: #f2f2f2;
            min-width: 300px;
        }
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            margin-right: 10px;
        }
        .edit-btn {
            color: #2196F3;
        }
        .delete-btn {
            color: #f44336;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: #000;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
    </style>
  </head>
  <body>
    <header>
      <div class="left-header">
        <img src="/logo.png" width="140" height="58" alt="" />
        <i class="ri-toggle-line"></i>
      </div>
      <div class="right-header">
        <i class="ri-notification-3-line"></i>
        <i class="ri-user-line"></i>
      </div>
    </header>
    <main>
      <aside class="sidebar">
        <ul>
          <li>
            <a href="dashboard.html"
              ><i class="ri-dashboard-2-line"></i> Dashboard</a
            >
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-shopping-cart-line"></i> Sales</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-user-add-line"></i> Purchase</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li class="dropdown">
            <a href="#"><i class="ri-instance-line"></i> Inventory</a>
            <i class="ri-arrow-down-s-line"></i>
            <ul class="dropdown-content">
              <li><a href="../products.html">Products</a></li>
              <li><a href="#">Product Category</a></li>
              <li><a href="#">Product Brand</a></li>
              <li><a href="#">Units Of Measurement</a></li>
            </ul>
          </li>
          <li>
            <a href="#"><i class="ri-user-line"></i> Human Resource</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-money-dollar-circle-line"></i> Budget</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-file-list-3-line"></i> Reports</a>
            <i class="ri-arrow-right-line"></i>
          </li>
        </ul>
      </aside>
      <section class="section">
        <div class="container">
          <div class="header">
              <h1>Category</h1>
              <button id="addCategoryBtn" class="btn">+ Add New Category</button>
          </div>
          <p>Manage Category</p>
          <table id="categoryTable">
              <thead>
                  <tr>
                      <th>IMAGE</th>
                      <th>CATEGORY NAME</th>
                      <th>ACTION</th>
                  </tr>
              </thead>
              <tbody>
                  <!-- Categories will be dynamically added here -->
              </tbody>
          </table>
      </div>
  
      <div id="categoryModal" class="modal">
          <div class="modal-content">
              <span class="close">&times;</span>
              <h2 id="modalTitle">Add New Category</h2>
              <form id="categoryForm">
                  <div class="form-group">
                      <label for="categoryName">Category Name</label>
                      <input type="text" id="categoryName" required>
                  </div>
                  <div class="form-group">
                      <label for="categoryImage">Category Image URL</label>
                      <input type="text" id="categoryImage" required>
                  </div>
                  <button type="submit" class="btn">Save Category</button>
              </form>
          </div>
      </div>
  
    
    </main>

    <script>
      let categories = [
          { id: 1, name: 'Computer', image: 'https://media-cldnry.s-nbcnews.com/image/upload/t_fit-1500w,f_auto,q_auto:best/streams/2012/March/120309/166787-120309-vintage-computer-145p-1.jpg' },
          { id: 2, name: 'Shoes', image: 'https://www.flashfootwear.com.pk/wp-content/uploads/2021/01/Black-Ecosense-Lightning-Shoes-for-Kids-1.jpg' },
          { id: 3, name: 'Watches', image: 'https://www.flashfootwear.com.pk/wp-content/uploads/2021/01/Black-Ecosense-Lightning-Shoes-for-Kids-1.jpg' },
          { id: 4, name: 'Accessories', image: 'https://www.flashfootwear.com.pk/wp-content/uploads/2021/01/Black-Ecosense-Lightning-Shoes-for-Kids-1.jpg' },
          { id: 5, name: 'Cycles', image: 'https://www.flashfootwear.com.pk/wp-content/uploads/2021/01/Black-Ecosense-Lightning-Shoes-for-Kids-1.jpg' }
      ];

      const categoryTable = document.getElementById('categoryTable');
      const addCategoryBtn = document.getElementById('addCategoryBtn');
      const categoryModal = document.getElementById('categoryModal');
      const closeBtn = document.getElementsByClassName('close')[0];
      const categoryForm = document.getElementById('categoryForm');
      const modalTitle = document.getElementById('modalTitle');

      let editingCategoryId = null;

      function renderCategories() {
          const tbody = categoryTable.querySelector('tbody');
          tbody.innerHTML = '';
          categories.forEach(category => {
              const row = document.createElement('tr');
              row.innerHTML = `
                  <td><img src="${category.image}" alt="${category.name}" width="50" height="50"></td>
                  <td>${category.name}</td>
                  <td>
                      <button class="action-btn edit-btn" data-id="${category.id}">‚úèÔ∏è</button>
                      <button class="action-btn delete-btn" data-id="${category.id}">üóëÔ∏è</button>
                  </td>
              `;
              tbody.appendChild(row);
          });
      }

      function showModal(isEditing = false) {
          categoryModal.style.display = 'block';
          modalTitle.textContent = isEditing ? 'Edit Category' : 'Add New Category';
          if (!isEditing) {
              categoryForm.reset();
              editingCategoryId = null;
          }
      }

      function closeModal() {
          categoryModal.style.display = 'none';
      }

      addCategoryBtn.onclick = () => showModal();
      closeBtn.onclick = closeModal;

      window.onclick = (event) => {
          if (event.target == categoryModal) {
              closeModal();
          }
      };

      categoryForm.onsubmit = (e) => {
          e.preventDefault();
          const name = document.getElementById('categoryName').value;
          const image = document.getElementById('categoryImage').value;
          if (editingCategoryId) {
              const index = categories.findIndex(c => c.id === editingCategoryId);
              categories[index] = { ...categories[index], name, image };
          } else {
              const newId = categories.length > 0 ? Math.max(...categories.map(c => c.id)) + 1 : 1;
              categories.push({ id: newId, name, image });
          }
          renderCategories();
          closeModal();
      };

      categoryTable.addEventListener('click', (e) => {
          if (e.target.classList.contains('edit-btn')) {
              const id = Number(e.target.getAttribute('data-id'));
              const category = categories.find(c => c.id === id);
              document.getElementById('categoryName').value = category.name;
              document.getElementById('categoryImage').value = category.image;
              editingCategoryId = id;
              showModal(true);
          } else if (e.target.classList.contains('delete-btn')) {
              const id = Number(e.target.getAttribute('data-id'));
              categories = categories.filter(c => c.id !== id);
              renderCategories();
          }
      });

      renderCategories();
  </script>
    <script src="/scripts/dropdown.js"></script>
  </body>
</html>
