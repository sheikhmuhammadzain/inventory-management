<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Products</title>
    <link rel="stylesheet" href="/assets/css/product.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        select {
            height: 35px;
        }
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
        .col {
            flex: 1;
            padding: 0 10px;
            min-width: 200px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .container {
            margin: auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            
        }
        th {
            background-color: #f2f2f2;
            min-width: 300px;
        }
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            margin-right: 10px;
        }
        .edit-btn {
            color: #2196F3;
        }
        .delete-btn {
            color: #f44336;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: #000;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
    </style>
  </head>
  <body>
    <header>
      <div class="left-header">
        <img src="/logo.png" width="140" height="58" alt="" />
        <i class="ri-toggle-line"></i>
      </div>
      <div class="right-header">
        <i class="ri-notification-3-line"></i>
        <i class="ri-user-line"></i>
      </div>
    </header>
    <main>
      <aside class="sidebar">
        <ul>
          <li>
            <a href="dashboard.html"
              ><i class="ri-dashboard-2-line"></i> Dashboard</a
            >
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-shopping-cart-line"></i> Sales</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-user-add-line"></i> Purchase</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li class="dropdown">
            <a href="#"><i class="ri-instance-line"></i> Inventory</a>
            <i class="ri-arrow-down-s-line"></i>
            <ul class="dropdown-content">
              <li><a href="../products.html">Products</a></li>
              <li><a href="#">Product Category</a></li>
              <li><a href="#">Product Brand</a></li>
              <li><a href="#">Units Of Measurement</a></li>
            </ul>
          </li>
          <li>
            <a href="#"><i class="ri-user-line"></i> Human Resource</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-money-dollar-circle-line"></i> Budget</a>
            <i class="ri-arrow-right-line"></i>
          </li>
          <li>
            <a href="#"><i class="ri-file-list-3-line"></i> Reports</a>
            <i class="ri-arrow-right-line"></i>
          </li>
        </ul>
      </aside>
      <section class="section">
        <div class="container">
          <div class="header">
              <h1>Unit</h1>
              <button id="addUnitBtn" class="add-btn">+ Add New Unit</button>
          </div>
          <p>Manage Unit</p>
          <table id="unitTable">
              <thead>
                  <tr>
                      <th>UNIT NAME</th>
                      <th>NO. OF DECIMAL PLACES</th>
                      <th>ACTION</th>
                  </tr>
              </thead>
              <tbody>
                  <!-- Units will be dynamically added here -->
              </tbody>
          </table>
      </div>
  
      <div id="unitModal" class="modal">
          <div class="modal-content">
              <span class="close">&times;</span>
              <h2 id="modalTitle">Add New Unit</h2>
              <form id="unitForm">
                  <div class="form-group">
                      <label for="unitName">Unit Name</label>
                      <input type="text" id="unitName" required>
                  </div>
                  <div class="form-group">
                      <label for="decimalPlaces">No. of Decimal Places</label>
                      <input type="number" id="decimalPlaces" required min="0">
                  </div>
                  <button type="submit" class="add-btn">Save Unit</button>
              </form>
          </div>
      </div>
  
      <script>
          let units = [
              { id: 1, name: 'NA', decimalPlaces: 0 },
              { id: 2, name: 'Pcs', decimalPlaces: 1 },
              { id: 3, name: 'Kg', decimalPlaces: 1 },
              { id: 4, name: 'Box', decimalPlaces: 1 },
              { id: 5, name: 'feet', decimalPlaces: 21 },
              { id: 6, name: 'L', decimalPlaces: 2 },
              { id: 7, name: 'Users', decimalPlaces: 0 },
              { id: 8, name: 'carton', decimalPlaces: 100 },
              { id: 9, name: 'Service', decimalPlaces: 0 }
          ];
  
          const unitTable = document.getElementById('unitTable');
          const addUnitBtn = document.getElementById('addUnitBtn');
          const unitModal = document.getElementById('unitModal');
          const closeBtn = document.getElementsByClassName('close')[0];
          const unitForm = document.getElementById('unitForm');
          const modalTitle = document.getElementById('modalTitle');
  
          let editingUnitId = null;
  
          function renderUnits() {
              const tbody = unitTable.querySelector('tbody');
              tbody.innerHTML = '';
              units.forEach(unit => {
                  const row = document.createElement('tr');
                  row.innerHTML = `
                      <td>${unit.name}</td>
                      <td>${unit.decimalPlaces}</td>
                      <td>
                          <button class="action-btn edit-btn" data-id="${unit.id}"><i class="ri-pencil-line"></i></button>
                          <button class="action-btn delete-btn" data-id="${unit.id}"><i class="ri-delete-bin-line"></i></button>
                      </td>
                  `;
                  tbody.appendChild(row);
              });
          }
  
          function showModal(isEditing = false) {
              unitModal.style.display = 'block';
              modalTitle.textContent = isEditing ? 'Edit Unit' : 'Add New Unit';
              if (!isEditing) {
                  unitForm.reset();
                  editingUnitId = null;
              }
          }
  
          function closeModal() {
              unitModal.style.display = 'none';
          }
  
          addUnitBtn.onclick = () => showModal();
          closeBtn.onclick = closeModal;
  
          window.onclick = (event) => {
              if (event.target == unitModal) {
                  closeModal();
              }
          };
  
          unitForm.onsubmit = (e) => {
              e.preventDefault();
              const name = document.getElementById('unitName').value;
              const decimalPlaces = parseInt(document.getElementById('decimalPlaces').value);
              if (editingUnitId) {
                  const index = units.findIndex(u => u.id === editingUnitId);
                  units[index] = { ...units[index], name, decimalPlaces };
              } else {
                  const newId = units.length > 0 ? Math.max(...units.map(u => u.id)) + 1 : 1;
                  units.push({ id: newId, name, decimalPlaces });
              }
              renderUnits();
              closeModal();
          };
  
          unitTable.addEventListener('click', (e) => {
              if (e.target.closest('.edit-btn')) {
                  const id = Number(e.target.closest('.edit-btn').getAttribute('data-id'));
                  const unit = units.find(u => u.id === id);
                  document.getElementById('unitName').value = unit.name;
                  document.getElementById('decimalPlaces').value = unit.decimalPlaces;
                  editingUnitId = id;
                  showModal(true);
              } else if (e.target.closest('.delete-btn')) {
                  const id = Number(e.target.closest('.delete-btn').getAttribute('data-id'));
                  units = units.filter(u => u.id !== id);
                  renderUnits();
              }
          });
  
          renderUnits();
      </script>
    <script src="/scripts/dropdown.js"></script>
  </body>
</html>
